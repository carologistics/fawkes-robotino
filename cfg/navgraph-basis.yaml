%YAML 1.2
%TAG ! tag:fawkesrobotics.org,navgraph/
---
graph-name: LLSF
root: SW

default-properties:
    # Max. distance between actual and target positions to deem the target
    # reached. This value is for intermediate nodes on a path; m
    # The value can be overwritten per node in the graph file.
    - travel_tolerance: 1.5

    # Max. distance between actual and target positions to deem the target
    # reached. This value is for the last node on a path; m
    # The value can be overwritten per node in the graph file.
    - target_tolerance: 0.7

    # Max. distance between actual and target orientation to deem the target
    # reached. This value is for the last node on a path; rad
    - orientation_tolerance: 0.6

    # When following a plan the robot will check all upcoming nodes if they
    # are close to the robot within this tolerance. If so, they take a shortcut
    # and will go to the node in the plan after the shortcut node.
    # This is potentially dangerous depending on the graph and navigator as it
    # might violate the typical graph constraint of only having direct-line-of-tavel
    # connections. The value can be overidden with a node property of the same name; m
    - shortcut_tolerance: 1.2

    # Distance from base_link to the MPS to align
    - align_distance: 0.45

    # Signal position on the table. Z is the table height above ground.
    - signal_hint_x: 0.035
    - signal_hint_y: -0.1
    - signal_hint_z: 0.78

    # Offset for aligning in front of the conveyor using the laser line
    - input_offset_y: 0.025
    - output_offset_y: -0.025


nodes:

# Default point, used only for mps_detect_signal when no or an invalid place= is given
  - !unconnected
    name: place-default
    pos: [1, 1]
    properties:
      - only-copy-properties

# drive into field points
# Cyan
  - !unconnected
    name: C-ins-out
    pos: [3.3, -0.55]
    properties:
      - always-copy: true
  - !unconnected
    name: C-ins-in
    pos: [3.3, 0.75]
    properties:
      - always-copy: true
# Magenta
  - !unconnected
    name: M-ins-out
    pos: [-3.3, -0.55]
    properties:
      - always-copy: true
  - !unconnected
    name: M-ins-in
    pos: [-3.3, 0.75]
    properties:
      - always-copy: true

# wait points
  - !unconnected
    name: WAIT1
    pos : [0,1]
    properties:
      - orientation: 1.57
      - always-copy: true
      - target_tolerance: 1.5

# Machine points for property generation
# Positions will be written by the generator
# Cyan
  - !unconnected
    name: C-CS1
    pos: [0, 0]
    properties:
      - only-copy-properties
      - tag_input: 1
      - tag_output: 2
  - !unconnected
    name: C-CS2
    pos: [0, 0]
    properties:
      - only-copy-properties
      - tag_input: 17
      - tag_output: 18
      - input_offset_x: 0.01
      - output_offset_x: 0.02
  - !unconnected
    name: C-RS1
    pos: [0, 0]
    properties:
      - only-copy-properties
      - tag_input: 33
      - tag_output: 34
  - !unconnected
    name: C-RS2
    pos: [0, 0]
    properties:
      - only-copy-properties
      - tag_input: 177
      - tag_output: 178
      - input_offset_x: 0.01
      - output_offset_x: -0.02
  - !unconnected
    name: C-BS
    pos: [0, 0]
    properties:
      - only-copy-properties
      - tag_input: 65
      - tag_output: 66
      - input_offset_x: 0.01
  - !unconnected
    name: C-DS
    pos: [0, 0]
    properties:
      - only-copy-properties
      - tag_input: 81
      - tag_output: 82
      - input_offset_x: -0.02
#Magenta
  - !unconnected
    name: M-CS1
    pos: [0, 0]
    properties:
      - only-copy-properties
      - tag_input: 97
      - tag_output: 98
      - output_offset_x: 0.01
  - !unconnected
    name: M-CS2
    pos: [0, 0]
    properties:
      - only-copy-properties
      - tag_input: 113
      - tag_output: 114
  - !unconnected
    name: M-RS1
    pos: [0, 0]
    properties:
      - only-copy-properties
      - tag_input: 129
      - tag_output: 130
  - !unconnected
    name: M-RS2
    pos: [0, 0]
    properties:
      - only-copy-properties
      - tag_input: 145
      - tag_output: 146
      - input_offset_x: 0.01
      - output_offset_x: -0.01
  - !unconnected
    name: M-BS
    pos: [0, 0]
    properties:
      - only-copy-properties
      - tag_input: 161
      - tag_output: 162
      - input_offset_x: 0.01
  - !unconnected
    name: M-DS
    pos: [0, 0]
    properties:
      - only-copy-properties
      - tag_input: 49
      - tag_output: 50
      - input_offset_x: -0.02

# Possible directional tags:
# !bidir (bidirectional, default), !dir (directed)
connections:
# common

